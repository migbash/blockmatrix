<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
    <!-- Generated by javadoc (12.0.1) on Tue Aug 06 13:39:59 EDT 2019 -->
    <title>TimeStampingAuthorityServer</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="2019-08-06" name="dc.created">
    <link href="../../../stylesheet.css" rel="stylesheet" title="Style" type="text/css">
    <link href="../../../jquery/jquery-ui.css" rel="stylesheet" title="Style" type="text/css">
    <script src="../../../script.js" type="text/javascript"></script>
    <script src="../../../jquery/jszip/dist/jszip.min.js" type="text/javascript"></script>
    <script src="../../../jquery/jszip-utils/dist/jszip-utils.min.js" type="text/javascript"></script>
    <!--[if IE]>
    <script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
    <![endif]-->
    <script src="../../../jquery/jquery-3.3.1.js" type="text/javascript"></script>
    <script src="../../../jquery/jquery-migrate-3.0.1.js" type="text/javascript"></script>
    <script src="../../../jquery/jquery-ui.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TimeStampingAuthorityServer";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
    <nav role="navigation">
        <div class="fixedNav">
            <!-- ========= START OF TOP NAVBAR ======= -->
            <div class="topNav"><a id="navbar.top">
                <!--   -->
            </a>
                <div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a>
                </div>
                <a id="navbar.top.firstrow">
                    <!--   -->
                </a>
                <ul class="navList" title="Navigation">
                    <li><a href="package-summary.html">Package</a></li>
                    <li class="navBarCell1Rev">Class</li>
                    <li><a href="package-tree.html">Tree</a></li>
                    <li><a href="../../../deprecated-list.html">Deprecated</a></li>
                    <li><a href="../../../index-files/index-1.html">Index</a></li>
                    <li><a href="../../../help-doc.html">Help</a></li>
                </ul>
            </div>
            <div class="subNav">
                <div>
                    <ul class="subNavList">
                        <li>Summary:&nbsp;</li>
                        <li>Nested&nbsp;|&nbsp;</li>
                        <li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
                        <li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
                        <li><a href="#method.summary">Method</a></li>
                    </ul>
                    <ul class="subNavList">
                        <li>Detail:&nbsp;</li>
                        <li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
                        <li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
                        <li><a href="#method.detail">Method</a></li>
                    </ul>
                </div>
                <ul class="navListSearch">
                    <li><label for="search">SEARCH:</label>
                        <input disabled="disabled" id="search" type="text" value="search">
                        <input disabled="disabled" id="reset" type="reset" value="reset">
                    </li>
                </ul>
            </div>
            <a id="skip.navbar.top">
                <!--   -->
            </a>
            <!-- ========= END OF TOP NAVBAR ========= -->
        </div>
        <div class="navPadding">&nbsp;</div>
        <script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->

        </script>
    </nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
    <div class="header">
        <div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gov.nist.timestampingauthority</a>
        </div>
        <h2 class="title" title="Class TimeStampingAuthorityServer">Class TimeStampingAuthorityServer</h2>
    </div>
    <div class="contentContainer">
        <ul class="inheritance">
            <li>java.lang.Object</li>
            <li>
                <ul class="inheritance">
                    <li><a href="TimeStampingAuthority.html" title="class in gov.nist.timestampingauthority">gov.nist.timestampingauthority.TimeStampingAuthority</a>
                    </li>
                    <li>
                        <ul class="inheritance">
                            <li>gov.nist.timestampingauthority.TimeStampingAuthorityServer</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="description">
            <ul class="blockList">
                <li class="blockList">
                    <hr>
                    <pre>public class <span class="typeNameLabel">TimeStampingAuthorityServer</span>
extends <a href="TimeStampingAuthority.html"
           title="class in gov.nist.timestampingauthority">TimeStampingAuthority</a></pre>
                    <div class="block">The TimeStampingAuthorityServer class uses NTP to communicate with clock servers
                        and clients. This class is an
                        extension of TimeStampingAuthority class, which provides timestamps without serving the clients.
                        NTP is an extension
                        of UDP protocol, so this server uses UDP classes and commands. When the class is run, it creates
                        three Clock classes
                        and makes them synchronize with corresponding time servers periodically. Each clock class
                        updates time using a
                        separate thread. There are also 2 other threads, one for getting client events, and the other to
                        respond to client
                        events. They have their corresponding methods. The events are stored in a thread-safe concurrent
                        queue by the handler
                        method and are taken from there by the responder method.

                        To prevent this class from interfering with the actual NTP service it can be run from any local
                        port. All clocks are
                        assumed to operate on port 123. If the file with clock addresses could not be opened, the
                        execution is aborted.
                    </div>
                </li>
            </ul>
        </div>
        <div class="summary">
            <ul class="blockList">
                <li class="blockList">
                    <!-- =========== FIELD SUMMARY =========== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="field.summary">
                                <!--   -->
                            </a>
                                <h3>Field Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tr>
                                            <th class="colFirst" scope="col">Modifier and Type</th>
                                            <th class="colSecond" scope="col">Field</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        <tbody>
                                        <tr class="altColor">
                                            <td class="colFirst"><code>private java.util.Queue&lt;<a
                                                    href="ClientEvent.html"
                                                    title="class in gov.nist.timestampingauthority">ClientEvent</a>&gt;</code>
                                            </td>
                                            <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                    href="#eventQueue">eventQueue</a></span></code></th>
                                            <td class="colLast">&nbsp;</td>
                                        </tr>
                                        <tr class="rowColor">
                                            <td class="colFirst"><code>private int</code></td>
                                            <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                    href="#port">port</a></span></code></th>
                                            <td class="colLast">&nbsp;</td>
                                        </tr>
                                        <tr class="altColor">
                                            <td class="colFirst"><code>private java.net.DatagramPacket</code></td>
                                            <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                    href="#request">request</a></span></code></th>
                                            <td class="colLast">&nbsp;</td>
                                        </tr>
                                        <tr class="rowColor">
                                            <td class="colFirst"><code>private boolean</code></td>
                                            <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                    href="#runningServer">runningServer</a></span></code></th>
                                            <td class="colLast">&nbsp;</td>
                                        </tr>
                                        <tr class="altColor">
                                            <td class="colFirst"><code>private java.net.DatagramSocket</code></td>
                                            <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                    href="#socket">socket</a></span></code></th>
                                            <td class="colLast">&nbsp;</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    <!-- ======== CONSTRUCTOR SUMMARY ======== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.summary">
                                <!--   -->
                            </a>
                                <h3>Constructor Summary</h3>
                                <div class="memberSummary">
                                    <table>
                                        <caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
                                        <tr>
                                            <th class="colFirst" scope="col">Constructor</th>
                                            <th class="colLast" scope="col">Description</th>
                                        </tr>
                                        <tbody>
                                        <tr class="altColor">
                                            <th class="colConstructorName" scope="row"><code><span
                                                    class="memberNameLink"><a
                                                    href="#%3Cinit%3E(java.lang.Long,java.lang.Integer,java.nio.file.Path,java.lang.Boolean,java.lang.Integer)">TimeStampingAuthorityServer</a></span>&#8203;(java.lang.Long&nbsp;updateInterval,
                                                java.lang.Integer&nbsp;timeout,
                                                java.nio.file.Path&nbsp;filePath,
                                                java.lang.Boolean&nbsp;spreadOutClocks,
                                                java.lang.Integer&nbsp;port)</code></th>
                                            <td class="colLast">
                                                <div class="block">Create TimeStampingAuthorityServer, initialize the
                                                    event queue and the clocks.
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </li>
                        </ul>
                    </section>
                    <!-- ========== METHOD SUMMARY =========== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.summary">
                                <!--   -->
                            </a>
                                <h3>Method Summary</h3>
                                <div class="memberSummary">
                                    <div aria-orientation="horizontal" role="tablist">
                                        <button aria-controls="memberSummary_tabpanel" aria-selected="true"
                                                class="activeTableTab" id="t0" onkeydown="switchTab(event)" role="tab"
                                                tabindex="0">All Methods
                                        </button>
                                        <button aria-controls="memberSummary_tabpanel" aria-selected="false"
                                                class="tableTab" id="t2" onclick="show(2);" onkeydown="switchTab(event)"
                                                role="tab" tabindex="-1">Instance Methods
                                        </button>
                                        <button aria-controls="memberSummary_tabpanel" aria-selected="false"
                                                class="tableTab" id="t4" onclick="show(8);" onkeydown="switchTab(event)"
                                                role="tab" tabindex="-1">Concrete Methods
                                        </button>
                                    </div>
                                    <div id="memberSummary_tabpanel" role="tabpanel">
                                        <table aria-labelledby="t0">
                                            <tr>
                                                <th class="colFirst" scope="col">Modifier and Type</th>
                                                <th class="colSecond" scope="col">Method</th>
                                                <th class="colLast" scope="col">Description</th>
                                            </tr>
                                            <tbody>
                                            <tr class="altColor" id="i0">
                                                <td class="colFirst"><code>private java.net.DatagramPacket</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#createResponse(gov.nist.timestampingauthority.ClientEvent,long)">createResponse</a></span>&#8203;(<a
                                                        href="ClientEvent.html"
                                                        title="class in gov.nist.timestampingauthority">ClientEvent</a>&nbsp;event,
                                                    long&nbsp;averageTime)</code></th>
                                                <td class="colLast">
                                                    <div class="block">Take the client event along with the average time
                                                        of the clocks at this moment and form a response UDP packet.
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="rowColor" id="i1">
                                                <td class="colFirst"><code>int</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#getPort()">getPort</a></span>()</code></th>
                                                <td class="colLast">
                                                    <div class="block">Get server port.</div>
                                                </td>
                                            </tr>
                                            <tr class="altColor" id="i2">
                                                <td class="colFirst"><code>private void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#handlePacket(java.net.DatagramPacket,long)">handlePacket</a></span>&#8203;(java.net.DatagramPacket&nbsp;request,
                                                    long&nbsp;receiveTime)</code></th>
                                                <td class="colLast">
                                                    <div class="block">Handle incoming packet.</div>
                                                </td>
                                            </tr>
                                            <tr class="rowColor" id="i3">
                                                <td class="colFirst"><code>boolean</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#isRunning()">isRunning</a></span>()</code></th>
                                                <td class="colLast">
                                                    <div class="block">Tell whether the server is running.</div>
                                                </td>
                                            </tr>
                                            <tr class="altColor" id="i4">
                                                <td class="colFirst"><code>private void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#receiveClientEvents()">receiveClientEvents</a></span>()</code>
                                                </th>
                                                <td class="colLast">
                                                    <div class="block">Wait for new client requests and handle them by
                                                        putting them into the event queue.
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="rowColor" id="i5">
                                                <td class="colFirst"><code>private void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#requestTimeAndRespond()">requestTimeAndRespond</a></span>()</code>
                                                </th>
                                                <td class="colLast">
                                                    <div class="block">Send response.</div>
                                                </td>
                                            </tr>
                                            <tr class="altColor" id="i6">
                                                <td class="colFirst"><code>void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#setPort(int)">setPort</a></span>&#8203;(int&nbsp;port)</code>
                                                </th>
                                                <td class="colLast">
                                                    <div class="block">Set and validate server port.</div>
                                                </td>
                                            </tr>
                                            <tr class="rowColor" id="i7">
                                                <td class="colFirst"><code>void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#start()">start</a></span>()</code></th>
                                                <td class="colLast">
                                                    <div class="block">Connect the socket to the port if not done
                                                        previously, start clock synchronization, start a separate thread
                                                        for
                                                        getting aggregate time and responding to events in the queue,
                                                        start another thread for receiving events and
                                                        adding them to the queue.
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="altColor" id="i8">
                                                <td class="colFirst"><code>void</code></td>
                                                <th class="colSecond" scope="row"><code><span class="memberNameLink"><a
                                                        href="#stop()">stop</a></span>()</code></th>
                                                <td class="colLast">
                                                    <div class="block">Close server socket, stop the clocks and stop
                                                        listening.
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <ul class="blockList">
                                    <li class="blockList"><a
                                            id="methods.inherited.from.class.gov.nist.timestampingauthority.TimeStampingAuthority">
                                        <!--   -->
                                    </a>
                                        <h3>Methods inherited from class&nbsp;gov.nist.timestampingauthority.<a
                                                href="TimeStampingAuthority.html"
                                                title="class in gov.nist.timestampingauthority">TimeStampingAuthority</a>
                                        </h3>
                                        <code><a href="TimeStampingAuthority.html#getAccurateClockCount()">getAccurateClockCount</a>,
                                            <a href="TimeStampingAuthority.html#getAggregateTime()">getAggregateTime</a>,
                                            <a href="TimeStampingAuthority.html#getFilePath()">getFilePath</a>, <a
                                                    href="TimeStampingAuthority.html#getTimeout()">getTimeout</a>, <a
                                                    href="TimeStampingAuthority.html#getUpdateInterval()">getUpdateInterval</a>,
                                            <a href="TimeStampingAuthority.html#isSpreadOutClocks()">isSpreadOutClocks</a>,
                                            <a href="TimeStampingAuthority.html#isTimeAvailable()">isTimeAvailable</a>,
                                            <a href="TimeStampingAuthority.html#loadClocks()">loadClocks</a>, <a
                                                    href="TimeStampingAuthority.html#setFilePath(java.nio.file.Path)">setFilePath</a>,
                                            <a href="TimeStampingAuthority.html#setSpreadOutClocks(boolean)">setSpreadOutClocks</a>,
                                            <a href="TimeStampingAuthority.html#setTimeout(java.lang.Integer)">setTimeout</a>,
                                            <a href="TimeStampingAuthority.html#setUpdateInterval(long)">setUpdateInterval</a></code>
                                    </li>
                                </ul>
                                <ul class="blockList">
                                    <li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
                                        <!--   -->
                                    </a>
                                        <h3>Methods inherited from class&nbsp;java.lang.Object</h3>
                                        <code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString,
                                            wait, wait, wait</code></li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                </li>
            </ul>
        </div>
        <div class="details">
            <ul class="blockList">
                <li class="blockList">
                    <!-- ============ FIELD DETAIL =========== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="field.detail">
                                <!--   -->
                            </a>
                                <h3>Field Detail</h3>
                                <a id="port">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>port</h4>
                                        <pre>private&nbsp;int port</pre>
                                    </li>
                                </ul>
                                <a id="eventQueue">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>eventQueue</h4>
                                        <pre>private final&nbsp;java.util.Queue&lt;<a href="ClientEvent.html"
                                                                                      title="class in gov.nist.timestampingauthority">ClientEvent</a>&gt; eventQueue</pre>
                                    </li>
                                </ul>
                                <a id="runningServer">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>runningServer</h4>
                                        <pre>private volatile&nbsp;boolean runningServer</pre>
                                    </li>
                                </ul>
                                <a id="socket">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>socket</h4>
                                        <pre>private&nbsp;java.net.DatagramSocket socket</pre>
                                    </li>
                                </ul>
                                <a id="request">
                                    <!--   -->
                                </a>
                                <ul class="blockListLast">
                                    <li class="blockList">
                                        <h4>request</h4>
                                        <pre>private final&nbsp;java.net.DatagramPacket request</pre>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <!-- ========= CONSTRUCTOR DETAIL ======== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="constructor.detail">
                                <!--   -->
                            </a>
                                <h3>Constructor Detail</h3>
                                <a id="&lt;init&gt;(java.lang.Long,java.lang.Integer,java.nio.file.Path,java.lang.Boolean,java.lang.Integer)">
                                    <!--   -->
                                </a>
                                <ul class="blockListLast">
                                    <li class="blockList">
                                        <h4>TimeStampingAuthorityServer</h4>
                                        <pre>public&nbsp;TimeStampingAuthorityServer&#8203;(java.lang.Long&nbsp;updateInterval,
                                   java.lang.Integer&nbsp;timeout,
                                   java.nio.file.Path&nbsp;filePath,
                                   java.lang.Boolean&nbsp;spreadOutClocks,
                                   java.lang.Integer&nbsp;port)
                            throws java.lang.IllegalArgumentException,
                                   java.io.IOException</pre>
                                        <div class="block">Create TimeStampingAuthorityServer, initialize the event
                                            queue and the clocks. You can provide null instead of an
                                            argument to use default value. If one of the clock addresses could not be
                                            found, the clock is ignored and the
                                            message is printed into System.out.
                                        </div>
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            <dd><code>updateInterval</code> - interval for clock update, default is
                                                10000 ms (10 seconds), must be a positive integer in
                                                ms. Values over 5000 ms are recommended due to clock server
                                                restrictions.
                                            </dd>
                                            <dd><code>timeout</code> - time to wait for clock response, default is 500
                                                ms, must be a positive integer in ms. Values over
                                                100 ms are recommended, due to network latency.
                                            </dd>
                                            <dd><code>filePath</code> - path to a file where the clock addresses are
                                                stored, must be a path to a readable file
                                                containing clock addresses. This file must have the following format:
                                                each line must either contain the NTP server address or start with % to
                                                indicate a comment.
                                                Empty lines are permitted as well. Invalid or unreachable addresses are
                                                ignored. If no working
                                                clocks were found, the server is stopped. Please note that if the text
                                                file was created with
                                                Notepad on Windows it might have some special characters in the
                                                beginning of the file that may
                                                hinder the file reading (something connected to UTF-8 with BOM). It is
                                                advised that you make
                                                sure the file does not start with anything but spaces, actual server
                                                address or a percentage
                                                character (%).
                                            </dd>
                                            <dd><code>spreadOutClocks</code> - whether the clocks are to be spread out
                                                to reduce the network load, e.g. if there are 10
                                                clocks and update interval is 1000, 1st clock starts at 0ms, 2nd at
                                                100ms, etc. If set to
                                                false, all clocks start updating simultaneously.
                                            </dd>
                                            <dd><code>port</code> - port on which the server operates, default is 124,
                                                because 123 is probably occupied by the system
                                                time updating service, must be a valid system port (positive integer).
                                            </dd>
                                            <dt><span class="throwsLabel">Throws:</span></dt>
                                            <dd><code>java.lang.IllegalArgumentException</code> - when one of the
                                                arguments is invalid or when none of the clocks has a valid
                                                address
                                            </dd>
                                            <dd><code>java.io.IOException</code> - when the file could not be opened
                                            </dd>
                                        </dl>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <!-- ============ METHOD DETAIL ========== -->
                    <section role="region">
                        <ul class="blockList">
                            <li class="blockList"><a id="method.detail">
                                <!--   -->
                            </a>
                                <h3>Method Detail</h3>
                                <a id="getPort()">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>getPort</h4>
                                        <pre class="methodSignature">public&nbsp;int&nbsp;getPort()</pre>
                                        <div class="block">Get server port.</div>
                                        <dl>
                                            <dt><span class="returnLabel">Returns:</span></dt>
                                            <dd>server port</dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="setPort(int)">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>setPort</h4>
                                        <pre class="methodSignature">public&nbsp;void&nbsp;setPort&#8203;(int&nbsp;port)
             throws java.lang.IllegalArgumentException</pre>
                                        <div class="block">Set and validate server port. Will only be updated when the
                                            server is restarted.
                                        </div>
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            <dd><code>port</code> - server port</dd>
                                            <dt><span class="throwsLabel">Throws:</span></dt>
                                            <dd><code>java.lang.IllegalArgumentException</code></dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="isRunning()">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>isRunning</h4>
                                        <pre class="methodSignature">public&nbsp;boolean&nbsp;isRunning()</pre>
                                        <div class="block">Tell whether the server is running. This implies both clocks
                                            being updated, clients' requests being received and
                                            responses being sent.
                                        </div>
                                        <dl>
                                            <dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
                                            <dd><code><a
                                                    href="TimeStampingAuthority.html#isRunning()">isRunning</a></code>&nbsp;in
                                                class&nbsp;<code><a href="TimeStampingAuthority.html"
                                                                    title="class in gov.nist.timestampingauthority">TimeStampingAuthority</a></code>
                                            </dd>
                                            <dt><span class="returnLabel">Returns:</span></dt>
                                            <dd>whether server is running</dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="receiveClientEvents()">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>receiveClientEvents</h4>
                                        <pre class="methodSignature">private&nbsp;void&nbsp;receiveClientEvents()</pre>
                                        <div class="block">Wait for new client requests and handle them by putting them
                                            into the event queue. Supposed to run in a separate
                                            thread.
                                        </div>
                                    </li>
                                </ul>
                                <a id="handlePacket(java.net.DatagramPacket,long)">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>handlePacket</h4>
                                        <pre class="methodSignature">private&nbsp;void&nbsp;handlePacket&#8203;(java.net.DatagramPacket&nbsp;request,
                          long&nbsp;receiveTime)</pre>
                                        <div class="block">Handle incoming packet. If NTP packet is client-mode then
                                            respond to that host with a NTP response packet
                                            otherwise ignore.
                                        </div>
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            <dd><code>request</code> - incoming DatagramPacket</dd>
                                            <dd><code>receiveTime</code> - time packet received</dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="requestTimeAndRespond()">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>requestTimeAndRespond</h4>
                                        <pre class="methodSignature">private&nbsp;void&nbsp;requestTimeAndRespond()</pre>
                                        <div class="block">Send response. Supposed to run in a separate thread. Take an
                                            event from the queue, if any, get the aggregated
                                            time from the clocks and return the response.
                                        </div>
                                    </li>
                                </ul>
                                <a id="createResponse(gov.nist.timestampingauthority.ClientEvent,long)">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>createResponse</h4>
                                        <pre class="methodSignature">private&nbsp;java.net.DatagramPacket&nbsp;createResponse&#8203;(<a
                                                href="ClientEvent.html" title="class in gov.nist.timestampingauthority">ClientEvent</a>&nbsp;event,
                                               long&nbsp;averageTime)</pre>
                                        <div class="block">Take the client event along with the average time of the
                                            clocks at this moment and form a response UDP packet.
                                        </div>
                                        <dl>
                                            <dt><span class="paramLabel">Parameters:</span></dt>
                                            <dd><code>event</code> - client event</dd>
                                            <dd><code>averageTime</code> - average time from clocks</dd>
                                            <dt><span class="returnLabel">Returns:</span></dt>
                                            <dd>response UDP packet</dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="start()">
                                    <!--   -->
                                </a>
                                <ul class="blockList">
                                    <li class="blockList">
                                        <h4>start</h4>
                                        <pre class="methodSignature">public&nbsp;void&nbsp;start()
           throws java.io.IOException</pre>
                                        <div class="block">Connect the socket to the port if not done previously, start
                                            clock synchronization, start a separate thread for
                                            getting aggregate time and responding to events in the queue, start another
                                            thread for receiving events and
                                            adding them to the queue. This method is non-blocking.
                                        </div>
                                        <dl>
                                            <dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
                                            <dd><code><a href="TimeStampingAuthority.html#start()">start</a></code>&nbsp;in
                                                class&nbsp;<code><a href="TimeStampingAuthority.html"
                                                                    title="class in gov.nist.timestampingauthority">TimeStampingAuthority</a></code>
                                            </dd>
                                            <dt><span class="throwsLabel">Throws:</span></dt>
                                            <dd><code>java.io.IOException</code> - when the server failed to connect to
                                                the socket.
                                            </dd>
                                        </dl>
                                    </li>
                                </ul>
                                <a id="stop()">
                                    <!--   -->
                                </a>
                                <ul class="blockListLast">
                                    <li class="blockList">
                                        <h4>stop</h4>
                                        <pre class="methodSignature">public&nbsp;void&nbsp;stop()</pre>
                                        <div class="block">Close server socket, stop the clocks and stop listening.
                                        </div>
                                        <dl>
                                            <dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
                                            <dd><code><a href="TimeStampingAuthority.html#stop()">stop</a></code>&nbsp;in
                                                class&nbsp;<code><a href="TimeStampingAuthority.html"
                                                                    title="class in gov.nist.timestampingauthority">TimeStampingAuthority</a></code>
                                            </dd>
                                        </dl>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                </li>
            </ul>
        </div>
    </div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
    <nav role="navigation">
        <!-- ======= START OF BOTTOM NAVBAR ====== -->
        <div class="bottomNav"><a id="navbar.bottom">
            <!--   -->
        </a>
            <div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a>
            </div>
            <a id="navbar.bottom.firstrow">
                <!--   -->
            </a>
            <ul class="navList" title="Navigation">
                <li><a href="package-summary.html">Package</a></li>
                <li class="navBarCell1Rev">Class</li>
                <li><a href="package-tree.html">Tree</a></li>
                <li><a href="../../../deprecated-list.html">Deprecated</a></li>
                <li><a href="../../../index-files/index-1.html">Index</a></li>
                <li><a href="../../../help-doc.html">Help</a></li>
            </ul>
        </div>
        <div class="subNav">
            <div>
                <ul class="subNavList">
                    <li>Summary:&nbsp;</li>
                    <li>Nested&nbsp;|&nbsp;</li>
                    <li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
                    <li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
                    <li><a href="#method.summary">Method</a></li>
                </ul>
                <ul class="subNavList">
                    <li>Detail:&nbsp;</li>
                    <li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
                    <li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
                    <li><a href="#method.detail">Method</a></li>
                </ul>
            </div>
        </div>
        <a id="skip.navbar.bottom">
            <!--   -->
        </a>
        <!-- ======== END OF BOTTOM NAVBAR ======= -->
    </nav>
</footer>
</body>
</html>
